!function(a){var b={margin:{top:0,right:0,bottom:0,left:0},aspectRatio:16/9,padding:1.5,width:600};this.bubbleChart=function(c,d){var e,f,g=a(!0,{},b,d),h=g.width,i=Math.ceil(h/g.aspectRatio),j=g.innerHeight=i-g.margin.top-g.margin.bottom,k=g.innerWidth=h-g.margin.left-g.margin.right,l=d3.pack().size([k,j]),m=c.select("g"),n=m.select(".data"),o=d3.transition().duration(1e3),p=function(){return n.empty()&&(n=m.append("g").attr("class","data").attr("aria-hidden","true")),n.selectAll(".bubble").order()},q=function(){var a,b,c=this.settings,d=c.filterData&&"function"==typeof c.filterData?c.filterData.call(c,c.data):c.data,e=d3.hierarchy({children:d}).sum(c.y.getValue.bind(c)).sort(function(a,b){return c.y.getValue.call(c,b)-c.y.getValue.call(c,a)}),f=function(a){if(c.z&&c.z[a]&&"function"==typeof c.z[a])return c.z[a].bind(c)},h=function(a,b){var d="bubble bubble"+(b+1);return c.z&&c.z.getClass&&"function"==typeof c.z.getClass&&(d+=" "+c.z.getClass.call(c,a)),d},i=function(){var a,b,c,d,e=f("getBubbleStyle");if(e&&(a=e.apply(null,arguments))&&"object"==typeof a)for(b=Object.keys(a),c=0;c<b.length;c++)d=b[c],d3.select(this).style(d,a[d])},j=function(a,b,c){return isNaN(a.x)||isNaN(a.y)?d3.select(c[b]).attr("transform"):"translate("+a.x+","+a.y+")"},k=function(a){return a.r||0};l.padding(g.padding),l(e),a=p().data(e.children,c.z.getId),b=a.enter().append("g").attr("id",f("getId")).attr("class",h).attr("transform",j),b.append("circle").attr("r",k).each(i),b.append("text").text(c.x.getText.bind(c)),b=a.transition(o).attr("class",h).attr("transform",j),b.select("circle").attr("r",k).each(i),b.select("text").text(c.x.getText.bind(c)),b=a.exit().transition(o),b.select("circle").attr("r",0),b.select("text").text("")},r=function(){},s=function(){n.remove()};return e={settings:g,clear:s,svg:c},c.attr("viewBox","0 0 "+h+" "+i).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",g.altText),m.empty()&&(m=c.append("g").attr("transform","translate("+g.margin.left+","+g.margin.top+")")),f=function(){q.apply(e),!1!==g.datatable&&(r.apply(e),d3.stcExt.addIEShim(c,i,h))},g.data?f():d3.json(g.url,function(a,b){g.data=b,f()}),e}}(jQuery.extend);
//# sourceMappingURL=bubble.min.js.map